@using ASP.NETSaturdayProject.Models
@model List<Food>

<script src="~/Scripts/Custom.js"></script>

<div class="container">
    <h1> List of Foods</h1>
    <table class="table table-dark">
        <tr>
            <td>@Html.ActionLink("Sort", "Sorting", "Food", new { SortName = "ID", dsort = false }, new { Class = "btn btn-primary" })</td>
            <td>@Html.ActionLink("Sort", "Sorting", "Food", new { SortName = "NAME", dsort = false }, new { Class = "btn btn-primary" })</td>
            <td>@Html.ActionLink("Sort", "Sorting", "Food", new { SortName = "CUISINE", dsort = false }, new { Class = "btn btn-primary" })</td>
            <td>@Html.ActionLink("Sort", "Sorting", "Food", new { SortName = "PRICE", dsort = false }, new { Class = "btn btn-primary" })</td>
            <td>@Html.ActionLink("Sort", "Sorting", "Food", new { SortName = "QUANTITY", dsort = false }, new { Class = "btn btn-primary" })</td>
        </tr>

        <tr>
            <td>ID</td>
            <td>NAME</td>
            <td>CUISINE</td>
            <td>PRICE</td>
            <td>QUANTITY</td>
            <td>Delete</td>
            <td>Update</td>
        </tr>

        @foreach (Food fd in Model)
        {
            <tr>
                <td>@fd.id</td>
                <td>@fd.name</td>
                <td>@fd.cuisine</td>
                <td>@fd.price</td>
                <td>@fd.Quantity</td>
                <td>@Html.ActionLink("Delete", "DeleteClickedVDA", "Food", fd, new { Class = "btn btn-danger", id = "button" + fd.id })</td>
                <td><button Class="btn btn-warning" onclick="UpdateClick('@fd.id', '@fd.name', '@fd.cuisine', '@fd.price', '@fd.Quantity')">Update</button></td>
            </tr>
        }

        @using (Html.BeginForm("InsertFoodVDA", "Food", FormMethod.Post, new { Class = "form-inline" }))
        {
            <tfoot>
                <tr>
                    <td>
                        <span class="gg-add-r bg-success mt-1"></span>
                    </td>
                    <td>
                        @Html.TextBox("name", "", new { Class = "form-control", PlaceHolder = "Enter Food Name" })
                        @Html.ValidationMessage("name", "", new { Class = "text-danger" })
                    </td>
                    <td>
                        @Html.TextBox("cuisine", "", new { Class = "form-control", PlaceHolder = "Enter Cuisine Name" })
                        @Html.ValidationMessage("cuisine", "", new { Class = "text-danger" })
                    </td>
                    <td>
                        @Html.TextBox("price", "", new { Class = "form-control", PlaceHolder = "Enter Price" })
                        @Html.ValidationMessage("price", "", new { Class = "text-danger" })
                    </td>
                    <td>
                        @Html.TextBox("Quantity", "", new { Class = "form-control", PlaceHolder = "Enter Quantity" })
                        @Html.ValidationMessage("Quantity", "", new { Class = "text-danger" })
                    </td>
                    <td colspan="2">
                        <input type="submit" class="form-control btn btn-success" />
                    </td>
                </tr>
            </tfoot>
        }
    </table>

    @using (Html.BeginForm("UpdateFoodVDA", "Food", FormMethod.Post, new { Class = "form-group" }))
    {
        <div class="modal fade" id="updateModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Update</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        @Html.Label("Id")
                        @Html.TextBox("id", "", new { Class = "form-control", PlaceHolder = "ID", Id = "UpdateId", Readonly="true"})
                        @Html.ValidationMessage("name", "", new { Class = "text-danger" })

                        @Html.Label("Name")
                        @Html.TextBox("name", "", new { Class = "form-control", PlaceHolder = "Enter Food Name", Id = "UpdateName" })
                        @Html.ValidationMessage("name", "", new { Class = "text-danger" })

                        @Html.Label("Cuisine")
                        @Html.TextBox("cuisine", "", new { Class = "form-control", PlaceHolder = "Enter Cuisine Name", Id = "UpdateCuisine" })
                        @Html.ValidationMessage("cuisine", "", new { Class = "text-danger" })

                        @Html.Label("Price")
                        @Html.TextBox("price", "", new { Class = "form-control", PlaceHolder = "Enter Price", Id = "UpdatePrice" })
                        @Html.ValidationMessage("price", "", new { Class = "text-danger" })

                        @Html.Label("Quantity")
                        @Html.TextBox("Quantity", "", new { Class = "form-control", PlaceHolder = "Enter Quantity", Id = "UpdateQuantity" })
                        @Html.ValidationMessage("Quantity", "", new { Class = "text-danger" })
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <input type="submit" class="btn btn-success" />
                    </div>
                </div>
            </div>
        </div>
    }
</div>

